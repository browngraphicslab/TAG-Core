<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/TAG/util/TAG.Util.Splitscreen.js - Touch Art Gallery web application</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../../images/WideLogo.scale-100.png" title="Touch Art Gallery web application"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/TAG.AnnotatedImage.html">TAG.AnnotatedImage</a></li>
            
                <li><a href="../classes/TAG.Authoring.EditorMenu.html">TAG.Authoring.EditorMenu</a></li>
            
                <li><a href="../classes/TAG.Layout.ArtworkEditor.html">TAG.Layout.ArtworkEditor</a></li>
            
                <li><a href="../classes/TAG.Layout.ArtworkViewer.html">TAG.Layout.ArtworkViewer</a></li>
            
                <li><a href="../classes/TAG.Layout.CollectionsPage.html">TAG.Layout.CollectionsPage</a></li>
            
                <li><a href="../classes/TAG.Layout.InternetFailurePage.js.html">TAG.Layout.InternetFailurePage.js</a></li>
            
                <li><a href="../classes/TAG.Layout.StartPage.html">TAG.Layout.StartPage</a></li>
            
                <li><a href="../classes/TAG.Layout.VideoPlayer.html">TAG.Layout.VideoPlayer</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ArtworkTrack.html">TAG.TourAuthoring.ArtworkTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.AudioTrack.html">TAG.TourAuthoring.AudioTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Command.html">TAG.TourAuthoring.Command</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ComponentControls.html">TAG.TourAuthoring.ComponentControls</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Display.html">TAG.TourAuthoring.Display</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ImageTrack.html">TAG.TourAuthoring.ImageTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.InkAuthoring.html">TAG.TourAuthoring.InkAuthoring</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.InkTrack.html">TAG.TourAuthoring.InkTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Keyframe.html">TAG.TourAuthoring.Keyframe</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.PlaybackControl.html">TAG.TourAuthoring.PlaybackControl</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Timeline.html">TAG.TourAuthoring.Timeline</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TimeManager.html">TAG.TourAuthoring.TimeManager</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TopMenu.html">TAG.TourAuthoring.TopMenu</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TourOptions.html">TAG.TourAuthoring.TourOptions</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Track.html">TAG.TourAuthoring.Track</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.UndoManager.html">TAG.TourAuthoring.UndoManager</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.VideoTrack.html">TAG.TourAuthoring.VideoTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Viewer.html">TAG.TourAuthoring.Viewer</a></li>
            
                <li><a href="../classes/TAG.Util.Artwork.html">TAG.Util.Artwork</a></li>
            
                <li><a href="../classes/TAG.Util.IdleTimer.html">TAG.Util.IdleTimer</a></li>
            
                <li><a href="../classes/TAG.Util.Splitscreen.html">TAG.Util.Splitscreen</a></li>
            
                <li><a href="../classes/tagInk.html">tagInk</a></li>
            
                <li><a href="../classes/Telemetry.html">Telemetry</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/TAG/util/TAG.Util.Splitscreen.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
ï»¿TAG.Util.makeNamespace(&quot;TAG.Util.Splitscreen&quot;);

/**
 * Utility functions for splitscreen mode.
 * @class TAG.Util.Splitscreen
 * @constructor
 * @return {Object}               some public methods
 */

TAG.Util.Splitscreen = (function () {
    &quot;use strict&quot;;
    var on = false,
        viewerL = null,
        viewerR = null;

    return {
        init: init,
        exit: exitSplitscreen,
        isOn: isOn,
        setOn: setOn,
        setViewers: setViewers,
    };

    /**
     * Returns whether we&#x27;re in splitscreen mode
     * @method isOn
     * @return {Boolean}       whether we&#x27;re in splitscreen mode
     */
    function isOn() {
        return on;
    }

    /**
     * Sets whether we&#x27;re in splitscreen mode
     * @method setOn
     * @param {Boolean} state       whether we should be in splitscreen mode
     */
    function setOn(state) {
        on = state;
    }

    /**
     * Sets the seadragon viewer for a certain artwork viewer root
     * @method setViewers
     * @param {jQuery obj} root              root of the artwork viewer
     * @param {AnnotatedImage} zoomimage     the AnnotatedImage object from which we&#x27;ll get the viewer
     */
    function setViewers(root, zoomimage) {
        if (root.data(&#x27;split&#x27;) === &quot;L&quot;) {
            viewerL = zoomimage.viewer;
        }
        if (root.data(&#x27;split&#x27;) === &#x27;R&#x27;) {
            viewerR = zoomimage.viewer;
        }
    }


    /**
     * Starts splitscreen
     * @method init
     * @param {jQuery obj} rootL     DOM root element (as JQuery obj) to go in left screen
     * @param {jQuery obj} rootR     DOM root element (as JQuery obj) to go in right screen
     */
    function init(rootL, rootR) {
        on = true;

        // initialize meta-containers
        var Lscreen = $(document.createElement(&#x27;div&#x27;)),
            Rscreen = $(document.createElement(&#x27;div&#x27;)),
            splitbar = $(document.createElement(&#x27;div&#x27;)),
            spliticon = $(document.createElement(&#x27;img&#x27;));

        // left screen
        Lscreen.attr(&#x27;id&#x27;, &#x27;metascreen-L&#x27;);
        Lscreen.append(rootL);
        Lscreen.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;0%&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;width&#x27;: &#x27;49.5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;z-index&#x27;: &#x27;999&#x27;,
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });

        if(rootL.attr(&#x27;id&#x27;) === &#x27;newCatalogRoot&#x27;) {
            rootL.find(&#x27;.bottomButton&#x27;).css(&quot;float&quot;, &quot;left&quot;);
        };

        // right screen
        Rscreen.attr(&#x27;id&#x27;, &#x27;metascreen-R&#x27;);
        Rscreen.append(rootR);
        Rscreen.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;50.5%&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;width&#x27;: &#x27;49.5%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;z-index&#x27;: &#x27;998&#x27;, // Rscreen should be lower than Lscreen so left-transitions can work
            &#x27;overflow&#x27;: &#x27;hidden&#x27;,
        });

        // center divider
        splitbar.attr(&#x27;id&#x27;, &#x27;splitbar&#x27;);
        splitbar.css({
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;left&#x27;: &#x27;49.5%&#x27;,
            &#x27;top&#x27;: &#x27;0%&#x27;,
            &#x27;width&#x27;: &#x27;1%&#x27;,
            &#x27;height&#x27;: &#x27;100%&#x27;,
            &#x27;z-index&#x27;: &#x27;1000&#x27;,
            &#x27;background-color&#x27;: &#x27;#191915&#x27;,
        });

        // buttons
        var exitL = makeExitButton(&#x27;R&#x27;),
            exitR = makeExitButton(&#x27;L&#x27;);
        exitL.css({ left: &#x27;-350%&#x27;, width: &quot;300%&quot; });
        exitR.css({ right: &#x27;-350%&#x27;, width: &quot;300%&quot; });
        splitbar.append(exitL).append(exitR);

        $(&#x27;#tagRoot&#x27;).append(Lscreen).append(splitbar).append(Rscreen);

        /**
         * Helper function for making exit buttons
         * Inner function of init()
         * @method makeExitButton
         * @param {String} side     the side the button is going to go on (&#x27;L&#x27; or &#x27;R&#x27;)
         * @return {jQuery obj}     the exit button
         */
        function makeExitButton(side) {
            var exit = $(document.createElement(&#x27;img&#x27;));
            exit.attr(&#x27;src&#x27;, tagPath + &#x27;images/icons/x.svg&#x27;);
            exit.css({
                &#x27;cursor&#x27;: &#x27;pointer&#x27;,
                &#x27;position&#x27;: &#x27;absolute&#x27;,
                &#x27;top&#x27;: &#x27;94%&#x27;,
                &#x27;width&#x27;: &#x27;115%&#x27;,
                &#x27;height&#x27;: &#x27;auto&#x27;,
            });
            exit.on(&#x27;click&#x27;, function () {
                exitSplitscreen(side);
            });
            return exit;
        }
    }

    /**
     * Exits splitscreen, making the specified side fullscreen and removing the other
     * @method exitSplitscreen
     * @param newside   The side to be made fullscreen, either &#x27;R&#x27; or &#x27;L&#x27;
     */
    function exitSplitscreen(newside) {
        var oldside,
            pickedScreen = $(&#x27;#metascreen-&#x27; + newside).detach(),
            root = $(pickedScreen.children(&#x27;.rootPage&#x27;)[0]); // only child should be root

        on = false;
        
        root.data(&#x27;split&#x27;, &#x27;L&#x27;);
        
        // remove all unnecessary metacontainers and contents
        if (newside === &#x27;L&#x27;) {
            $(&#x27;#metascreen-R&#x27;).remove();

            if (viewerL) {
                $(viewerL.container).css({ &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27; });
                viewerL.scheduleUpdate();
                /**
                var newLContainerSize = {
                    x: $(viewerL.container).width(),
                    y: $(viewerL.container).height()
                };
                viewerL.viewport.resize(newLContainerSize, false);
                viewerL.viewport.applyConstraints();
                viewerL.viewport.update();
                **/
            }
            viewerR = null;

        } else {
            $(&#x27;#metascreen-L&#x27;).remove();

            if (viewerR) {
                $(viewerR.container).css({ &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27; });
                viewerR.scheduleUpdate();
               // viewerR.viewport.applyConstraints();
               // viewerR.viewport.update();
            }
            //viewerR.viewport.panTo(new Seadragon.Point(outerContainerPivot.x,outerContainerPivot.y));
            viewerL = null;

        }
        $(&#x27;#splitbar&#x27;).remove();

        $(&#x27;#tagRoot&#x27;).append(root);

        fixLayoutsOnExit();

        if (viewerL) {
           // viewerL.scheduleUpdate();
            //viewerL.viewport.applyConstraints();
        }
        if (viewerR) {
            //viewerR.scheduleUpdate();
            //viewerR.viewport.applyConstraints();
        }
        viewerL = null;
        viewerR = null;

        /**
         * All the layout specific edits that need to be made upon exit
         * Theoretically, all of this should get wrapped into layout classes
         * but not sure the class pattern used allows for it
         * TODO document
         */
        function fixLayoutsOnExit() {
            // debugger;
            // Layout specific edits
            if (root.attr(&#x27;id&#x27;) === &#x27;artmodeRoot&#x27;) { // Fix sidebar, toggler, and splitscreen button
                var sideBar = root.find(&#x27;#sideBar&#x27;),
                    toggler = root.find(&#x27;#toggler&#x27;),
                    togglerImage = root.find(&#x27;#togglerImage&#x27;),
                    splitscreenContainer = root.find(&#x27;#splitscreenContainer&#x27;),
                    seadragonManipContainer = root.find(&#x27;#seadragonManipContainer&#x27;),
                    splitscreenIcon = root.find(&#x27;.splitscreen-icon&#x27;);
                    //locationHistoryDiv = root.find(&#x27;.locationHistoryDiv&#x27;),
                    //locationHistoryPanel = root.find(&#x27;.locationHistoryPanel&#x27;),
                    //locationHistoryToggle = root.find(&#x27;.locationHistoryToggle&#x27;),
                    //locationHistoryToggleIcon = root.find(&#x27;.locationHistoryToggleIcon&#x27;),
                    //locationHistoryText = root.find(&#x27;.locationHistoryContainer&#x27;).find(&#x27;img&#x27;),
                    //locationHistoryIcon = root.find(&#x27;.locationHistoryContainer&#x27;).find(&#x27;div&#x27;),
                    //lhmapsuffix = (newside === &#x27;R&#x27;) ? &#x27;R&#x27; : &#x27;&#x27;,
                    //lhmap = root.find(&#x27;.lpMapDiv&#x27;),
                    //sidebarsize = window.innerWidth * 0.2,
                    //locsize = window.innerWidth * 0.8;
                sideBar.css({
                    &#x27;left&#x27;: &#x27;0%&#x27;,
                    &#x27;right&#x27; : &#x27;auto&#x27;
                });
                toggler.css({
                    &#x27;position&#x27;: &#x27;absolute&#x27;,
                    &#x27;left&#x27;: &#x27;auto&#x27;,
                    &#x27;right&#x27;: &#x27;-12%&#x27;,
                    borderTopRightRadius: &quot;10px&quot;,
                    borderBottomRightRadius: &quot;10px&quot;,
                    borderTopLeftRadius: &quot;0px&quot;,
                    borderBottomLeftRadius: &quot;0px&quot;,
                });
                togglerImage.attr(&quot;src&quot;, tagPath + &#x27;images/icons/Close.svg&#x27;)
                            .css({
                                &#x27;left&#x27;: &#x27;0%&#x27;,
                                &#x27;right&#x27;: &#x27;auto&#x27;
                              });
                seadragonManipContainer.css({
                    &#x27;right&#x27;: &#x27;0%&#x27;,
                    &#x27;left&#x27;: &#x27;auto&#x27;
                });
                splitscreenContainer.css(&#x27;display&#x27;, &#x27;block&#x27;);
                //locationHistoryToggle.css({
                //    left: &#x27;87.5%&#x27;,
                //    &#x27;border-bottom-right-radius&#x27;: &#x27;10px&#x27;,
                //    &#x27;border-top-right-radius&#x27;: &#x27;10px&#x27;
                //});
                //$(locationHistoryToggleIcon).attr(&#x27;src&#x27;, &#x27;images/icons/Left.png&#x27;);
                //locationHistoryText.css(&quot;opacity&quot;, &quot;1.0&quot;); // reset location history opacity to 1.0
                //locationHistoryIcon.css(&quot;opacity&quot;, &quot;1.0&quot;);
                //lhmap.attr(&#x27;id&#x27;, &#x27;lpMapDiv&#x27;);
            } else if(root.attr(&#x27;id&#x27;) === &#x27;newCatalogRoot&#x27;) {
                root.find(&#x27;.bottomButton&#x27;).css({
                    &quot;float&quot;: &quot;right&quot;,
                    &quot;display&quot; : &quot;block&quot;
                });
                root.find(&#x27;.nextPrevCollection&#x27;).css({
                                &#x27;width&#x27;: (.95 * root.find(&quot;#collectionArea&quot;).width() - root.find(&#x27;.mainCollection&#x27;).width())/2 - root.find(&quot;.arrow&quot;).width(),
                              })
            } else if (root.hasClass(&#x27;videoPlayer&#x27;)) {
                root.find(&#x27;#playPauseButton&#x27;).attr(&#x27;src&#x27;, &#x27;images/icons/PlayWhite.svg&#x27;);
            } else if (root.hasClass(&#x27;exhibition&#x27;)) { // Restore defaults to exhibition
                root.find(&#x27;.leftbar-header&#x27;).css({
                    height: &#x27;5%&#x27;,
                });
                root.find(&#x27;.exhibition-label&#x27;).css({
                    width: &#x27;50%&#x27;,
                });
                root.find(&#x27;.videos-label&#x27;).css({
                    width: &#x27;50%&#x27;,
                });
                root.find(&#x27;.selectExhibition&#x27;).css({
                    &#x27;font-size&#x27;: &#x27;1.5em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                root.find(&#x27;.exhibition-title&#x27;).css({
                    &#x27;font-size&#x27;: &#x27;5.7em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                root.find(&#x27;.exhibition-subtitle-1&#x27;).css({
                    &#x27;font-size&#x27;: &#x27;3em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                root.find(&#x27;.exhibition-subtitle-2&#x27;).css({
                    &#x27;font-size&#x27;: &#x27;2em&#x27;,
                    &#x27;letter-spacing&#x27;: &#x27;inherit&#x27;,
                });
                root.find(&#x27;#catalogBackButton&#x27;).css({
                    &#x27;display&#x27;: &#x27;block&#x27;
                });
                root.find(&#x27;.feedback-icon&#x27;).css({
                    &#x27;display&#x27;: &#x27;inline&#x27;
                });
                root.find(&#x27;#exhibition-label&#x27;).css({
                    &#x27;display&#x27;: &#x27;block&#x27;
                });



                //$(&#x27;.exhibition-selection&#x27;).css(&#x27;font-size&#x27;, &#x27;200%&#x27;);//LADS.Util.getMaxFontSizeEM(root.find(&#x27;.exhibition-selection .exhibition-title&#x27;).text(), 1.5, $(window).width() * 0.75 * 0.8, .2 * root.find(&quot;.exhibition-selection&quot;).height()));

                // dz - dynamic font sizing
                var size = 0.096 * 0.45 * $(window).height();
                var exhibTitleSize = LADS.Util.getMaxFontSizeEM(&#x27;W&#x27;, 0.25, 9999, size * 0.85, 0.1);

                // exhibition selector text sizees
                $(&#x27;.exhibition-selection .exhibition-title&#x27;).css({
                    &#x27;font-size&#x27;: exhibTitleSize,
                });

                //LADS.Util.getMaxFontSizeEM(root.find(&#x27;.exhibition-selection .exhibition-title&#x27;).text(), 1.5, $(window).width() * 0.75 * 0.8, .2 * root.find(&quot;.exhibition-selection&quot;).height()));

                // &quot;collections&quot; text - give this an ID instead of a class
                root.find(&#x27;#exhibition-label&#x27;).css(&#x27;font-size&#x27;, LADS.Util.getMaxFontSizeEM(&#x27;Collections&#x27;, 1, $(window).width() * 0.1, 1000));

                // big exhibition name text = give this an ID instead of a class
                root.find(&#x27;.exhibition-name-div&#x27;).css(&#x27;font-size&#x27;, LADS.Util.getMaxFontSizeEM(root.find(&#x27;.exhibition-name-div&#x27;).text(), 1.5, $(window).width() * 0.75 * 0.8, .2 * root.find(&quot;.exhibition-info&quot;).height()));

                var imgW = .40 * $(&quot;.contentdiv&quot;).width();
                var imgH = imgW / 1.4;
                root.find(&#x27;.img-container&#x27;).css({
                    height: imgH + &quot;px&quot;,
                    width: imgW + &quot;px&quot;
                });
                root.find(&#x27;.explore-text&#x27;).css(&quot;font-size&quot;, LADS.Util.getMaxFontSizeEM(&quot;Explore&quot;, .5, .5 * root.find(&#x27;.explore-tab&#x27;).width(), .7 * root.find(&#x27;.explore-tab&#x27;).height()));
            }
        }
    }
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js/TAG/tourauthoring/TAG.TourAuthoring.TopMenu.js - Touch Art Gallery web application</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../../images/WideLogo.scale-100.png" title="Touch Art Gallery web application"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/TAG.AnnotatedImage.html">TAG.AnnotatedImage</a></li>
            
                <li><a href="../classes/TAG.Authoring.EditorMenu.html">TAG.Authoring.EditorMenu</a></li>
            
                <li><a href="../classes/TAG.Layout.ArtworkEditor.html">TAG.Layout.ArtworkEditor</a></li>
            
                <li><a href="../classes/TAG.Layout.ArtworkViewer.html">TAG.Layout.ArtworkViewer</a></li>
            
                <li><a href="../classes/TAG.Layout.CollectionsPage.html">TAG.Layout.CollectionsPage</a></li>
            
                <li><a href="../classes/TAG.Layout.InternetFailurePage.js.html">TAG.Layout.InternetFailurePage.js</a></li>
            
                <li><a href="../classes/TAG.Layout.StartPage.html">TAG.Layout.StartPage</a></li>
            
                <li><a href="../classes/TAG.Layout.VideoPlayer.html">TAG.Layout.VideoPlayer</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ArtworkTrack.html">TAG.TourAuthoring.ArtworkTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.AudioTrack.html">TAG.TourAuthoring.AudioTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Command.html">TAG.TourAuthoring.Command</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ComponentControls.html">TAG.TourAuthoring.ComponentControls</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Display.html">TAG.TourAuthoring.Display</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.ImageTrack.html">TAG.TourAuthoring.ImageTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.InkAuthoring.html">TAG.TourAuthoring.InkAuthoring</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.InkTrack.html">TAG.TourAuthoring.InkTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Keyframe.html">TAG.TourAuthoring.Keyframe</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.PlaybackControl.html">TAG.TourAuthoring.PlaybackControl</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Timeline.html">TAG.TourAuthoring.Timeline</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TimeManager.html">TAG.TourAuthoring.TimeManager</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TopMenu.html">TAG.TourAuthoring.TopMenu</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.TourOptions.html">TAG.TourAuthoring.TourOptions</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Track.html">TAG.TourAuthoring.Track</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.UndoManager.html">TAG.TourAuthoring.UndoManager</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.VideoTrack.html">TAG.TourAuthoring.VideoTrack</a></li>
            
                <li><a href="../classes/TAG.TourAuthoring.Viewer.html">TAG.TourAuthoring.Viewer</a></li>
            
                <li><a href="../classes/TAG.Util.Artwork.html">TAG.Util.Artwork</a></li>
            
                <li><a href="../classes/TAG.Util.IdleTimer.html">TAG.Util.IdleTimer</a></li>
            
                <li><a href="../classes/TAG.Util.Splitscreen.html">TAG.Util.Splitscreen</a></li>
            
                <li><a href="../classes/tagInk.html">tagInk</a></li>
            
                <li><a href="../classes/Telemetry.html">Telemetry</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js/TAG/tourauthoring/TAG.TourAuthoring.TopMenu.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
ï»¿TAG.Util.makeNamespace(&#x27;TAG.TourAuthoring.TopMenu&#x27;);

/**
 * The top-most menu bar for tour authoring
 * Back button, rename tour controls, save button, tour options
 * @class TAG.TourAuthoring.TopMenu
 * @constructor
 * @param {Object} options      relevant options required for the menu
 * @return {Object} that        the topbar as a DOM object        
 */
TAG.TourAuthoring.TopMenu = function (options) {   // viewer, undoManager, timeline, timeManager, tourobj, playbackControls, root, componentControls
    &quot;use strict&quot;;

    var // the parameter object passed in
        root = options.root,                                                  // root of the tour authoring top-bar
        viewer = options.viewer,                                              // the preview window for the current tour being edited
        timeline = options.timeline,                                          // timelines for the tracks
        tourobj = options.tourobj,                                            // doq containing tour info
        undoManager = options.undoManager,                                    // an instance of the UndoManager to keep track of the order of commands
        timeManager = options.timeManager,                                    // keeps track of time-related stuff in tour authoring
        playbackControls = options.playbackControls,                          // the component menu at the bottom of the screen to play/pause/seek videos
        componentControls = options.componentControls,                        // controls to add components and edit their properties

        // the UI stuff
        topbar,                                                               // creates the top-bar holding the menu
        dialogOverlay = $(TAG.Util.UI.blockInteractionOverlay()),            // the overlay generated when buttons like &#x27;save changes&#x27; are clicked, to prevent further interaction with the UI
        backDialogOverlay = $(TAG.Util.UI.blockInteractionOverlay()),        // the overlay generated when the program takes you back to the main tour-authoring page
        titleTextArea,                                                        // the div where the tour title can be modified
        backButton,                                                           // button to go back to the SettingsView page

        // booleans
        saveClicked = false,                                                  // checks if the save action has been invoked
        nameChanged = false;                                                  // checks if the text in the title text area has been changed
    
   init();
    
    /**Initialize the UI and relevant controls
     * @method init
     */
    function init() {
        topbar = createTopBar();
        titleTextArea = createTitleTextArea();
        topbar.append(titleTextArea);
        tourOptionsMenu();
        createBackDialog();
        createSaveDialog();
    }

    /**Creates the topbar div
     * @method createTopBar
     * @return {HTML Element} top       the top bar div
     */
    function createTopBar() {
        var top = $(document.createElement(&#x27;div&#x27;));
        top.css({ &quot;background-color&quot;: &quot;rgb(63,55,53)&quot;, &quot;height&quot;: &quot;8%&quot;, &quot;width&quot;: &quot;100%&quot; });
        top.attr(&#x27;id&#x27;, &#x27;topbar&#x27;);
        return top;
    }

    /**Saves the changes made to the tour
     * @method save
     * @param {Boolean} stayOnPage      determines whether or not to stay on the authoring page after saving changes
     */
    function save(stayOnPage) {
        var name = titleTextArea.val(),
            content = JSON.stringify(timeline.toRIN(true)),
            related = JSON.stringify(timeline.getRelatedArtworks()),
            options = {
                Name: name,
                Content: content,
                RelatedArtworks: related
            };

        console.log(&quot;isUploading === &quot; + componentControls.getIsUploading());
        saveClicked = true;
        nameChanged = false;

        //if ($(&quot;#inkEditText&quot;).css(&#x27;display&#x27;) !== &quot;none&quot;) {
        //    componentControls.saveText();
        //}
        //else if ($(&quot;#inkEditDraw&quot;).css(&#x27;display&#x27;) !== &quot;none&quot;) {
        //    componentControls.saveDraw();
        //}
        //else if ($(&quot;#inkEditTransparency&quot;).css(&#x27;display&#x27;) !== &quot;none&quot;) {
        //    componentControls.saveTrans();
        //}

        timeline.hideEditorOverlay();
        undoManager.setPrevFalse();                             //method sets savedState of top element of undoStack to true to indicate further prompt for saving is not required on leaving page
        
        TAG.Worktop.Database.changeTour(tourobj, options, function () {
            // success
            dialogOverlay.fadeOut(500);
            !stayOnPage &amp;&amp; goBack();
        }, function () {
            // unauth
            dialogOverlay.hide();
            var popup = TAG.Util.UI.popUpMessage(null, &quot;Tour not saved.  You must log in to save changes.&quot;);
            $(&#x27;body&#x27;).append(popup);
            $(popup).show();
        }, function (jqXHR, ajaxCall) {
            // conflict
            // Ignore conflict for now
            ajaxCall.force();
        }, function () {
            // error
            dialogOverlay.hide();
            var popup = TAG.Util.UI.popUpMessage(null, &quot;Tour not saved.  There was an error contacting the server.&quot;);
            $(&#x27;body&#x27;).append(popup);
            $(popup).show();
        });
    }

    /**The action excuted when back button is clicked
     * @method goBack
     */
    function goBack() {
        var messageBox,
            tempSettings;

        // first, make sure that a tour reload isn&#x27;t in progress
        if (viewer.getIsReloading()) {
            messageBox = TAG.Util.UI.popUpMessage(null, &quot;Tour reload in progress. Please wait a few moments.&quot;, null);
            $(messageBox).css(&#x27;z-index&#x27;, TAG.TourAuthoring.Constants.aboveRinZIndex + 1000);
            $(&#x27;body&#x27;).append(messageBox);
            $(messageBox).fadeIn(500);
            return;
        }

        tempSettings = new TAG.Authoring.SettingsView(&#x27;Tours&#x27;, null, null, tourobj.Identifier);
        backButton.off(&#x27;click&#x27;);
        viewer.unload();
        TAG.Util.UI.slidePageRight(tempSettings.getRoot());
    }

    /**Handles creating the components for the back button and related actions
     * @method createBackDialog
     */
    function createBackDialog() {
        var backSaveButton = $(document.createElement(&#x27;button&#x27;));
        var backDontSaveButton = $(document.createElement(&#x27;button&#x27;));
        var backCancelButton = $(document.createElement(&#x27;button&#x27;));
        var backButtonArea = $(document.createElement(&#x27;div&#x27;));
        var backButtonRow = $(document.createElement(&#x27;div&#x27;));
        var backDialog = $(document.createElement(&#x27;div&#x27;));
        var backDialogTitle = $(document.createElement(&#x27;div&#x27;));
        var buttonHeight = $(window).height() * 0.0504;
        var backDialogSpecs = TAG.Util.constrainAndPosition($(window).width(), $(window).height(),
         {
             center_h: true,
             center_v: true,
             width: 0.5,
             height: 0.35,
             max_width: 560,
             max_height: 200,
         });

        backButtonArea.css({
            &quot;top&quot;: &quot;18.5%&quot;,
            &#x27;margin-left&#x27;: &#x27;1.2%&#x27;,
            &#x27;height&#x27;: &#x27;63%&#x27;,
            &quot;width&quot;: buttonHeight + &#x27;px&#x27;,
            &quot;position&quot;: &quot;relative&quot;,
            &quot;float&quot;: &quot;left&quot;
        });
        backButton = $(document.createElement(&#x27;img&#x27;));
        backButton.attr(&#x27;src&#x27;, tagPath + &#x27;images/icons/Back.svg&#x27;);
        backButton.css({ &#x27;width&#x27;: &#x27;100%&#x27;, &#x27;height&#x27;: &#x27;100%&#x27; });

        backButton.mousedown(function () {
            TAG.Util.UI.cgBackColor(&quot;backButton&quot;, backButton, false);
        });

        backButton.mouseleave(function () {
            TAG.Util.UI.cgBackColor(&quot;backButton&quot;, backButton, true);
        });
        backDialogOverlay.attr(&#x27;id&#x27;, &#x27;backDialogOverlay&#x27;);
        backDialogOverlay.css({
            display: &#x27;none&#x27;,
            position: &#x27;absolute&#x27;,
            top: 0,
            left: 0,
            width: &#x27;100%&#x27;,
            height: &#x27;100%&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.6)&#x27;,
            &#x27;z-index&#x27;: TAG.TourAuthoring.Constants.aboveRinZIndex,
        });

        backDialog.attr(&#x27;id&#x27;, &#x27;backDialog&#x27;);
        backDialog.css({
            position: &#x27;absolute&#x27;,
            left: backDialogSpecs.x + &#x27;px&#x27;,
            top: backDialogSpecs.y + &#x27;px&#x27;,
            width: backDialogSpecs.width + &#x27;px&#x27;,
            height: backDialogSpecs.height + &#x27;px&#x27;,
            border: &#x27;3px double white&#x27;,
            &#x27;background-color&#x27;: &#x27;black&#x27;,
        });
        backDialogOverlay.append(backDialog);

        backDialogTitle.attr(&#x27;id&#x27;, &#x27;backDialogTitle&#x27;);
        backDialogTitle.css({
            color: &#x27;white&#x27;,
            &#x27;width&#x27;: &#x27;80%&#x27;,
            &#x27;height&#x27;: &#x27;15%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;top&#x27;: &#x27;12.5%&#x27;,
            &#x27;font-size&#x27;: &#x27;1.25em&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            &#x27;word-wrap&#x27;: &#x27;break-word&#x27;,
        });
        backDialog.append(backDialogTitle);
        backDialog.append(document.createElement(&#x27;br&#x27;));

        backButtonRow.css({
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;display&#x27;: &#x27;block&#x27;,
            &#x27;width&#x27;: &#x27;80%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;top&#x27;: &#x27;40%&#x27;
        });

        backSaveButton.css({
            &#x27;padding&#x27;: &#x27;1%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid white&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
        });
        backSaveButton.text(&#x27;Save&#x27;);
        backSaveButton.click(function () {
            save();
        });
        backButtonRow.append(backSaveButton);

        backDontSaveButton.css({
            &#x27;padding&#x27;: &#x27;1%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid white&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
            &#x27;left&#x27;: &#x27;20%&#x27;

        });
        backDontSaveButton.text(&#x27;Don\&#x27;t Save&#x27;);
        backDontSaveButton.click(function () {
            goBack();
        });

        backButtonRow.append(backDontSaveButton);
        backDialog.append(backButtonRow);

        backButton.click(function () {
            var messageBox;
            $(&#x27;.rightClickMenu&#x27;).hide();//shuts the menu that appears on right clicking on a track
            if (viewer.getIsReloading()) {
                messageBox = $(TAG.Util.UI.popUpMessage(null, &quot;Tour reload in progress. Please wait a few moments.&quot;, null));
                messageBox.css(&#x27;z-index&#x27;, TAG.TourAuthoring.Constants.aboveRinZIndex + 1000);
                $(&#x27;body&#x27;).append(messageBox);
                messageBox.fadeIn(500);
                return;
            }

            if (nameChanged || (undoManager.dirtyStateGetter() === false) || 
                (componentControls.getInkUndoManager() &amp;&amp; (componentControls.getInkUndoManager().dirtyStateGetter() === false))) {
                backDialogOverlay.fadeIn(500);
                if (titleTextArea.val().length === 0) {
                    titleTextArea.val(&#x27;Untitled Tour&#x27;);
                }
                backDialogTitle.text(&#x27;Save changes to &#x27; + $(titleTextArea).val() + &#x27; before leaving?&#x27;);
            } else {
                goBack(); 
            }
        });
        backButtonArea.append(backButton);
        topbar.append(backButtonArea);
    }

    /**Creating and positioning the title text area
     * @method createTitleTextArea
     * @return {HTML Element} textArea          the div containing the title text
     */
    function createTitleTextArea() {
        var textArea = $(document.createElement(&#x27;input&#x27;));
        var textAreaSpecs = TAG.Util.constrainAndPosition($(window).width(), $(window).height() * 0.08,
        {
            center_v: true,
            width: 0.2,
            height: 0.5,
            x_offset: 0.05,
            x_max_offset: 60,
        });

        textArea.css({
            &#x27;margin-left&#x27;: &#x27;3%&#x27;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;border&#x27;: &#x27;3px solid&#x27;,
            &#x27;border-color&#x27;: &#x27;#666666&#x27;,
            top: textAreaSpecs.y - 7 + &#x27;px&#x27;,
            &#x27;left&#x27;: textAreaSpecs.x + &#x27;px&#x27;,
            width: textAreaSpecs.width + &#x27;px&#x27;,
            height: textAreaSpecs.height + &#x27;px&#x27;,
        });
        textArea.attr({
            display: &#x27;block&#x27;,
            type: &#x27;text&#x27;,
            id: &#x27;textArea&#x27;,
            name: &#x27;textArea&#x27;,
            value: tourobj.Name
        });

        textArea.on(&#x27;keydown&#x27;, function (ev) {
            ev.stopImmediatePropagation();
        });
        textArea.on(&#x27;keypress&#x27;, function (ev) {
            ev.stopImmediatePropagation();
        });
        textArea.on(&#x27;keyup&#x27;, function (ev) {
            nameChanged = true;
            ev.stopImmediatePropagation();
        });
        return textArea;
    }

    /**Handles putting up the save/cancel dialog box on an overlay
     * @method createSaveDialog
     */
    function createSaveDialog() {
        var saveButton = $(document.createElement(&quot;button&quot;));
        var submitButton = $(document.createElement(&#x27;button&#x27;));
        var cancelButton = $(document.createElement(&#x27;button&#x27;));
        
        var saveDialog = $(document.createElement(&#x27;div&#x27;));
        var dialogTitle = $(document.createElement(&#x27;div&#x27;));
        var buttonRow = $(document.createElement(&#x27;div&#x27;));
        var saveButtonSpecs = TAG.Util.constrainAndPosition($(window).width() * 0.8, $(window).height() * 0.08,
            {
                center_v: true,
                width: 0.1,
                height: 0.5,
            });
        var fontsize = TAG.Util.getMaxFontSizeEM(&#x27;Save Changes&#x27;, 0.2, 0.75 * saveButtonSpecs.width, 0.75 * saveButtonSpecs.height, 0.01);
        var saveDialogSpecs = TAG.Util.constrainAndPosition($(window).width(), $(window).height(),
           {
               center_h: true,
               center_v: true,
               width: 0.5,
               height: 0.35,
               max_width: 560,
               max_height: 200,
           });
        
        saveButton.text(&quot;Save Changes&quot;);
        saveButton.attr(&#x27;type&#x27;, &#x27;button&#x27;);
        saveButton.css({
            &quot;color&quot;: &quot;white&quot;,
            &quot;border-color&quot;: &quot;white&quot;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            width: saveButtonSpecs.width + &#x27;px&#x27;,
            height: saveButtonSpecs.height + &#x27;px&#x27;,
            &#x27;top&#x27;: saveButtonSpecs.y + &#x27;px&#x27;,
            &#x27;font-size&#x27;: fontsize,
            &#x27;left&#x27;: parseInt(titleTextArea.css(&#x27;left&#x27;), 10) + titleTextArea.width() + 45 + ($(window).width() * 0.022) + &#x27;px&#x27;,
        });
        saveButton.click(function () {
            $(&#x27;.rightClickMenu&#x27;).hide();//shuts the menu that appears on right clicking on a track
            dialogOverlay.fadeIn(500);
            if (titleTextArea.val().length === 0) {
                titleTextArea.val(&#x27;Untitled Tour&#x27;);
            }
            dialogTitle.text(&#x27;Save changes to &#x27; + titleTextArea.val() + &#x27;?&#x27;);
        });

        /*save button dialog code*/
        // Overlay to darken out main UI
        dialogOverlay.attr(&#x27;id&#x27;, &#x27;dialogOverlay&#x27;);
        dialogOverlay.css({
            display: &#x27;none&#x27;,
            position: &#x27;absolute&#x27;,
            top: 0,
            left: 0,
            width: &#x27;100%&#x27;,
            height: &#x27;100%&#x27;,
            &#x27;background-color&#x27;: &#x27;rgba(0,0,0,0.6)&#x27;,
            &#x27;z-index&#x27;: TAG.TourAuthoring.Constants.aboveRinZIndex,
        });

        // Actual dialog container
        saveDialog.attr(&#x27;id&#x27;, &#x27;saveDialog&#x27;);
        saveDialog.css({
            position: &#x27;absolute&#x27;,
            left: saveDialogSpecs.x + &#x27;px&#x27;,
            top: saveDialogSpecs.y + &#x27;px&#x27;,
            width: saveDialogSpecs.width + &#x27;px&#x27;,
            height: saveDialogSpecs.height + &#x27;px&#x27;,
            border: &#x27;3px double white&#x27;,
            &#x27;background-color&#x27;: &#x27;black&#x27;,
        });
        
        dialogTitle.attr(&#x27;id&#x27;, &#x27;dialogTitle&#x27;);
        dialogTitle.css({
            color: &#x27;white&#x27;,
            &#x27;width&#x27;: &#x27;80%&#x27;,
            &#x27;height&#x27;: &#x27;15%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;top&#x27;: &#x27;12.5%&#x27;,
            &#x27;font-size&#x27;: &#x27;1.25em&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;text-align&#x27;: &#x27;center&#x27;,
            &#x27;word-wrap&#x27;: &#x27;break-word&#x27;,
        });

        // Container for &quot;save / cancel&quot; buttons
        buttonRow.css({
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;display&#x27;: &#x27;block&#x27;,
            &#x27;width&#x27;: &#x27;80%&#x27;,
            &#x27;left&#x27;: &#x27;10%&#x27;,
            &#x27;top&#x27;: &#x27;40%&#x27;
        });
        
        submitButton.css({
            &#x27;padding&#x27;: &#x27;1%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid white&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
        });
        submitButton.text(&#x27;Save&#x27;);
        submitButton.click(function () { save(true); });

        cancelButton.css({
            &#x27;padding&#x27;: &#x27;1%&#x27;,
            &#x27;border&#x27;: &#x27;1px solid white&#x27;,
            &#x27;width&#x27;: &#x27;auto&#x27;,
            &#x27;position&#x27;: &#x27;relative&#x27;,
            &#x27;margin-top&#x27;: &#x27;1%&#x27;,
            &#x27;float&#x27;: &#x27;right&#x27;
        });
        cancelButton.text(&#x27;Cancel&#x27;);
        cancelButton.click(function () { dialogOverlay.fadeOut(500); });
        
        
        // appending stuff
        topbar.append(saveButton);
        dialogOverlay.append(saveDialog);
        saveDialog.append(dialogTitle);
        saveDialog.append(document.createElement(&#x27;br&#x27;));
        saveDialog.append(buttonRow);
        buttonRow.append(submitButton);
        buttonRow.append(cancelButton);
    }
    
    /**Handles creating the tour options menu on the top bar
     * @method tourOptionsMenu
     */
    function tourOptionsMenu() {
        var tourOptions = TAG.TourAuthoring.TourOptions({
            timeManager: timeManager,
            timeline: timeline,
            root: root,
            undoManager: undoManager,
            playbackControls: playbackControls,
            tour: tourobj
        });
        var tourOptionsSpecs = TAG.Util.constrainAndPosition($(window).width(), $(window).height() * 0.08,
        {
           center_v: true,
           width: 0.13,
           height: 0.8,
        });
        var tourOptionsFontSize = TAG.Util.getMaxFontSizeEM(&#x27;Options&#x27;, 0.5, tourOptionsSpecs.width * 0.8, tourOptionsSpecs.height * 0.7, 0.01);
        var optionsLabelSpecs = TAG.Util.constrainAndPosition(tourOptionsSpecs.width, tourOptionsSpecs.height, {
            center_v: true,
            width: 0.8,
            height: 0.8,
        });
        var topBarLabel = $(document.createElement(&#x27;div&#x27;));
        var topBarLabelSpecs = TAG.Util.constrainAndPosition($(window).width(), $(window).height() * 0.08,
        {
            width: 0.4,
            height: 0.9,
        });
        var fontsizeTop = TAG.Util.getMaxFontSizeEM(&#x27;Tour Authoring&#x27;, 0.5, topBarLabelSpecs.width, topBarLabelSpecs.height * 0.85);
        tourOptions.addToDOM(topbar);
       
        tourOptions.applyCSS({
            &quot;height&quot;: tourOptionsSpecs.height + &quot;px&quot;,
            &quot;width&quot;: tourOptionsSpecs.width + &#x27;px&#x27;,
            &quot;left&quot;: &quot;60%&quot;,
            &#x27;top&#x27;: tourOptionsSpecs.y + &#x27;px&#x27;,
            &quot;position&quot;: &#x27;absolute&#x27;,
        });

        tourOptions.applyLabelCSS({
            &#x27;height&#x27;: optionsLabelSpecs.height + &#x27;px&#x27;,
            &#x27;width&#x27;: optionsLabelSpecs.width + &#x27;px&#x27;,
            &#x27;left&#x27;: 0 + &#x27;px&#x27;,
            &#x27;top&#x27;: optionsLabelSpecs.y + &#x27;px&#x27;,
            &quot;position&quot;: &#x27;absolute&#x27;,
            &#x27;font-size&#x27;: tourOptionsFontSize,
        });

        // Page header (not user&#x27;s tour title)
        topBarLabel.css({
            &#x27;margin-right&#x27;: &#x27;2%&#x27;,
            &#x27;margin-top&#x27;: 8 * 0.04 + &#x27;%&#x27;,
            &#x27;color&#x27;: &#x27;white&#x27;,
            &#x27;position&#x27;: &#x27;absolute&#x27;,
            &#x27;text-align&#x27;: &#x27;right&#x27;,
            &#x27;right&#x27;: &#x27;0px&#x27;,
            &#x27;top&#x27;: &#x27;0px&#x27;,
            &#x27;height&#x27;: topBarLabelSpecs.height + &#x27;px&#x27;,
            &#x27;width&#x27;: topBarLabelSpecs.width + &#x27;px&#x27;,
        });

        topBarLabel.css({ &#x27;font-size&#x27;: fontsizeTop });
        topBarLabel.text(&#x27;Tour Authoring&#x27;);
        topbar.append(topBarLabel);
    }

    /**Adds the entire top bar to the DOM
     * @method addToDOM
     * @param {HTML Element} container          the main container that contains TAG
     */
    function addToDOM(container) {
        container.append(topbar).append(dialogOverlay).append(backDialogOverlay);
    }
    
    // Public methods returned
    return {
        addToDOM: addToDOM
    };
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
